<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ticket</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
</head>
<body>
    <nav th:replace="~{navbar :: navbar ('Ticket')}" ></nav>
    
    <div class="container " th:object="${ticket}">
        <div class="col-6 d-flex justify-content-center">
            <div class="card border-dark mb-5 mt-5 text-center" style="max-width: 20rem;">
                <div class="card-header fs-5" th:text="${ticket.operatore.email}"></div>
                <div class="card-body text-dark">
                    <h5 class="card-title fs-4" th:text="*{titolo}" ></h5>
                    <p class="card-text fs-5" th:text="*{descrizione}"></p>
                </div>
                <div class=" card-footer fs-5" th:text="*{stato}"></div>
            </div>
        </div>
        <div class="col-6 container row" >
            <!-- tasto per creazione nota -->
                <div class="mt-4">
                    <a class="btn btn-dark mb-3" th:href="@{/ticket/{id}/nota(id=${ticket.id})}"> crea nota    
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="25" fill="currentColor" class="bi bi-ticket-perforated-fill ms-1" viewBox="0 0 16 16">
                        <path d="M0 4.5A1.5 1.5 0 0 1 1.5 3h13A1.5 1.5 0 0 1 16 4.5V6a.5.5 0 0 1-.5.5 1.5 1.5 0 0 0 0 3 .5.5 0 0 1 .5.5v1.5a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 11.5V10a.5.5 0 0 1 .5-.5 1.5 1.5 0 1 0 0-3A.5.5 0 0 1 0 6zm4-1v1h1v-1zm1 3v-1H4v1zm7 0v-1h-1v1zm-1-2h1v-1h-1zm-6 3H4v1h1zm7 1v-1h-1v1zm-7 1H4v1h1zm7 1v-1h-1v1zm-8 1v1h1v-1zm7 1h1v-1h-1z"/>
                        </svg></a>
                </div>
                 <!-- lista note vuota -->
                <div th:if="${note.isEmpty()}" class="col-6">
                    <div class="alert alert-warning text-center mt-4">
                        <h3>Non sono presenti note</h3>
                    </div>
                </div>
                <!-- lista con note presenti -->
                <div th:unless="${note.isEmpty()}" class=" row row-cols-1 row-cols-md-2 g-2 ">
                    <div class="col"  th:each="item : ${note}">
                        <div class="card " style="max-width: 18rem; min-width: 16rem;" >
                            <div class="card-body" >
                                <h5 class="card-title" th:text="${item.titolo}"></h5>
                                <p class="card-text" th:text="${item.testo}"></p>
                            </div>
                            <ul class="list-group list-group-flush bg-dark">
                        
                            <li class="list-group-item" th:text="${item.operatore.email}"></li>
                            <li class="list-group-item" th:text="${item.dataCreazione}"></li>
                             <li class="list-group-item bg-dark">
                                <div class="d-flex justify-content-between">
                                    <!-- tasto per eliminare -->
                                    <form th:action="@{/nota/delete/{id}(id=${item.id})}" method="post">
                                        <button class="btn btn-danger" type="submit" id="submitButton" 
                                                 onclick="return confirm('sei sicuro di voler eliminare la nota?')">
                                            <i class="fas fa-trash-alt">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                                                <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"/>
                                                <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"/>
                                            </svg></i>
                                        </button>
                                    </form> 
                                    <!-- tasto per modificare -->
                                    <a class="btn btn-light" th:href="@{|/nota/edit/${item.id}|}">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-fill" viewBox="0 0 16 16">
                                            <path d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.5.5 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11z"/>
                                        </svg>
                                    </a>                                  
                                </div>
                             </li>
                            </ul>
                        </div>   
                    </div>                
                </div>
        </div>
    </div>    

   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
</body>
</html>